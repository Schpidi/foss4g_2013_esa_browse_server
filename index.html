<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>ESA User Services powered by Open Source</title>

        <meta name="description" content="This presentation introduces the Browse Server of ESA's new User Services infrastructure (ngEO) serving browse images via OGC's WMTS and WMS standards using GDAL, MapServer, EOxServer, and MapCache">
        <meta name="author" content="Stephan Meissl">
        <meta name="author" content="Thomas Bonfort">
        <meta name="author" content="Fabian Schindler">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <link rel="stylesheet" href="reveal.js/css/reveal.min.css">
        <link rel="stylesheet" href="reveal.js/css/theme/osgeo.css" id="theme">

        <!-- For syntax highlighting -->
        <link rel="stylesheet" href="reveal.js/lib/css/zenburn.css">

        <!-- If the query includes 'print-pdf', use the PDF print sheet -->
        <script>
            document.write( '<link rel="stylesheet" href="reveal.js/css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
        </script>

        <!--[if lt IE 9]>
        <script src="reveal.js/lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="reveal">

            <!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">

                <section>
                    <h1>ESA User Services powered by Open Source</h1>
                    <p>Created by:</p>
                    <p>Stephan Meissl, Thomas Bonfort, and Fabian Schindler</p>
                    <a rel="license" href="http://creativecommons.org/licenses/by/3.0/deed.en_US"><img style="margin: 15px 0px 0px 0px;" alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by/3.0/88x31.png" /></a>
                    <p><small>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/3.0/deed.en_US">Creative Commons Attribution 3.0 Unported License</a>.</small></p>
                    <aside class="notes">
                        Good afternoon everybody. 
                    </aside>
                </section>

                <section>
                    <h2>Outline</h2>
                    <ul>
                        <li class="fragment">ESA User Services - ngEO</li>
                        <li class="fragment">ngEO Browse Server</li>
                        <li class="fragment">MapCache Enhancements</li>
                        <li class="fragment">Live Demonstration</li>
                    </ul>
                    <aside class="notes">
                        We will start with an introduction to ESA's new User Services infrastructure called ngEO, short for Next Generation Earth Observation.
                        It will be followed by a brief introduction of the design and functionality of the Browse Server component of ngEO.
                        We will highlight some MapCache enhancements originating from ngEO.
                        Last but not least we will try a Live Demonstration which our connection hopefully allows.
                    </aside>
                </section>

                <section>
                    <h2>ESA User Services - ngEO</h2>
                    <ul>
                        <li class="fragment">Operational Fully Online Data Access Service</li>
                        <li class="fragment">GMES and ESA Legacy Satellite Missions</li>
                        <li class="fragment">Fully Centralised Configuration Management</li>
                        <li class="fragment">Generic System usable for any Mission</li>
                    </ul>
                    <aside class="notes">
                    </aside>
                </section>

                <section>
                    <section>
                        <h2>ngEO Browse Server - Architecture</h2>
                        <img src="./images/browse_server_architecture.png" alt="Browse Server Architecture" title="Browse Server Architecture"/>
                        <aside class="notes">
                            Entirely based on Open Source Software:
                            * GDAL for raster processing
                            * MapServer for OGC services support
                            * EOxServer for Earth Observation extension
                            * MapCache for extremely well performing WMTS and WMS access
                        </aside>
                    </section>
                    <section>
                        <h2>ngEO Browse Server</h2>
                        <ul>
                            <li class="fragment">Entirely based on Open Source Software</li>
                            <li class="fragment">OGC's WMTS and WMS Standards</li>
                            <li class="fragment">Configuration from ngEO Controller</li>
                            <li class="fragment">Data ingested by ngEO FEED</li>
                            <li class="fragment">Authentication using Shibboleth</li>
                            <li class="fragment">Authorization from ngEO Web Server</li>
                        </ul>
                        <aside class="notes">
                            Won't go into details of the OGC services. Please look it up there is plenty of information available.
                        </aside>
                    </section>
                    <section>
                        <h2>Preprocessing</h2>
                        <ul>
                            <li class="fragment">Input Geographic Metadata</li>
                            <ul class="fragment">
                                <li>Footprint polygon</li>
                                <li>Regular grid of tiepoints</li>
                                <li>Pre-georeferenced images</li>
                            </ul>
                            <li class="fragment">Optimizations</li>
                            <ul class="fragment">
                                <li>Footprint generation</li>
                                <li>Re-projection</li>
                                <li>Addition of alpha-channel</li>
                                <li>Internal tilling</li>
                                <li>Overviews</li>
                                <li>Compression</li>
                            </ul>
                        </ul>
                        <aside class="notes">
                        </aside>
                    </section>
                </section>

                <section>
                    <section>
                        <h2><a href="http://mapserver.org/trunk/en/mapcache/index.html">MapCache</a> Enhancements</h2>
                    </section>
                    <section>
                        <h2>Time dimension support</h2>
                        <pre><code data-trim contenteditable>
<tileset name="foss4g">
    ...
    <timedimension type="sqlite" default="2013">
        <dbfile>/var/ngeob_data/mapcache.sqlite</dbfile>
        <query>select strftime('%Y-%m-%dT%H:%M:%SZ',start_time)||'/'||strftime('%Y-%m-%dT%H:%M:%SZ',end_time) from time where source_id=:tileset and start_time&lt;=datetime(:end_timestamp,'unixepoch') and end_time&gt;=datetime(:start_timestamp,'unixepoch') and maxx&gt;=:minx and maxy&gt;=:miny and minx&lt;=:maxx and miny&lt;=:maxy order by end_time limit 100</query>
    </timedimension>
</tileset>
                        </code></pre>
                        <p>Visual representations of search results e.g. single browses or all browses in a specific time interval</p>
                    </section>
                    <section>
                        <h2>Read-only functionality</h2>
                        <pre><code data-trim contenteditable>
<tileset name="foss4g">
    ...
    <read-only>true</read-only>
</tileset>
                        </code></pre>
                        <p>Absent tiles are considered empty instead of being sent to WMS for generation
                    </section>
                    <section>
                        <h2>Configure max-cached-zoom</h2>
                        <pre><code data-trim contenteditable>
<tileset name="foss4g">
    ...
    <grid max-cached-zoom="8" out-of-zoom-strategy="reassemble">
        WGS84
    </grid>
</tileset>
                        </code></pre>
                        <p>Dynamically create high resolution tiles from lower resolution ones
                    </section>
                    <section>
                        <h2>Storage optimization e.g. detect_blank</h2>
                        <pre><code data-trim contenteditable>
<cache name="foss4g" type="sqlite3">
    <dbfile>foss4g.sqlite</dbfile>
    <detect_blank>true</detect_blank>
</cache>
                        </code></pre>
                        <p>9 bytes stored per tile (hex quadruplet). Dynamically returned as a 132 byte PNG.
                    </section>
                </section>

                <section>
                    <section>
                        <h2>Demonstration</h2>
                        <p>Live</p>
                        <p><a href="http://foss4g.eox.at/time.html"><img src="./images/time.png" alt="Live Demonstration" title="Live Demonstration"/></a></p>
                        <aside class="notes">
                            We're trying a live demonstration using the shown URL.
                            We need you all to disconnect your devices. That's for better connection and you to follow us.
                            Btw. this is our Changing Times contribution to the Opening Up The Map challenge. Maybe you consider voting ;)
                            We have some screen shots as backup in case the connection is too poor.
                        </aside>
                    </section>
                    <section>
                        <h2>Time Slider</h2>
                        <img style="height: 600px;" src="./images/screenshot_timeslider.png" alt="Time Slider" title="Time Slider"/>
                        <aside class="notes">
                            Note the time slider at the bottom of the page.
                        </aside>
                    </section>
                    <section>
                        <h2>Entire Dataset</h2>
                        <img style="height: 600px;" src="./images/screenshot_entiredataset.png" alt="Entire Dataset" title="Entire Dataset"/>
                        <aside class="notes">
                            This is a layer holding the entire dataset. Thus the time slider is disabled.
                        </aside>
                    </section>
                    <section>
                        <h2>Nottingham</h2>
                        <img style="height: 600px;" src="./images/screenshot_nottingham_level10.png" alt="Nottingham" title="Nottingham"/>
                        <aside class="notes">
                            Let's zoom to Nottingham.
                        </aside>
                    </section>
                    <section>
                        <h2>max-cached-zoom</h2>
                        <img style="height: 600px;" src="./images/screenshot_nottingham_level12.png" alt="max-cached-zoom" title="max-cached-zoom"/>
                        <aside class="notes">
                            As you can see the image is still shown but no additional information is loaded (cf. max-cached-zoom).
                        </aside>
                    </section>
                </section>

                <section>
                    <h2>Conclusions / Outlook</h2>
                    <ul>
                        <li class="fragment">Mature Open Source Software building blocks for operational software exist</li>
                        <li class="fragment">New Functionality is feed back</li>
                        <li class="fragment">Time axis is important</li>
                    </ul>
                </section>

                <section>
                    <h2>Acknowledgement</h2>
                    <a href="http://esa.int"><img src="./images/ESA_Logo.png" alt="European Space Agency - ESA" title="European Space Agency - ESA"/></a>
                    <p>Funding has been provided by the European Space Agency (ESA) in the frame of the ngEO project.</p>
                </section>

                <section>
                    <h2>Thank you for your Attention</h2>
                    <br/>
                    <ul>
                        <li><a class="image" href="http://eox.at"><img style="margin: 0px 0px -8px 0px;"  src="./images/EOX_Logo.png" alt="EOX IT Services GmbH, Austria" title="EOX IT Services GmbH, Austria"/></a> @eox_a, office@eox.at</li>
                        <ul>
                            <li>Stephan Meissl @Schpidi</li>
                            <li>Fabian Schindler @constantinius13</li>
                        </ul>
                        <br/>
                        <li>Thomas Bonfort @tbonfort</li>
                    </ul>
                    <br/>
                    <br/>
                    <br/>
                    <a rel="license" href="http://creativecommons.org/licenses/by/3.0/deed.en_US"><img style="margin: 15px 0px 0px 0px;" alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by/3.0/88x31.png" /></a>
                    <p><small>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/3.0/deed.en_US">Creative Commons Attribution 3.0 Unported License</a>.</small></p>
                </section>

            </div>

        </div>

        <script src="reveal.js/lib/js/head.min.js"></script>
        <script src="reveal.js/js/reveal.min.js"></script>

        <script>

            // Full list of configuration options available here:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                keyboard: true,
                touch: true,
                overview: true,
                center: true,

                theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
                transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

                // Optional libraries used to extend on reveal.js
                dependencies: [
                    { src: 'reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
                    { src: 'reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
                    // { src: 'reveal.js/plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; } }
                    // { src: 'reveal.js/plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
                ]
            });

        </script>

    </body>
</html>
